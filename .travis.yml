sudo: false
language: python
cache: pip
matrix:
  fast_finish: true
  include:
  - python: 2.7
    env: TOX_ENV=py27-dj111 TOX_TEST_WITH_MYSQL=yes TOX_TEST_WITH_POSTGRESQL=yes TOX_TEST_WITH_OLD_SQLITE=yes
  - python: pypy
    env: TOX_ENV=pypy-dj111 TOX_TEST_WITH_MYSQL=yes TOX_TEST_WITH_POSTGRESQL=yes TOX_TEST_WITH_OLD_SQLITE=yes
      TOX_TEST_USE_CFFI=yes
  - python: 3.4
    env: TOX_ENV=py34-dj111 TOX_TEST_WITH_MYSQL=yes TOX_TEST_WITH_POSTGRESQL=yes
  - python: 3.5
    env: TOX_ENV=py35-dj111 TOX_TEST_WITH_MYSQL=yes TOX_TEST_WITH_POSTGRESQL=yes
  - python: 3.6
    env: TOX_ENV=py36-dj111 TOX_TEST_WITH_MYSQL=yes TOX_TEST_WITH_POSTGRESQL=yes
  - python: pypy3
    env: TOX_ENV=pypy3-dj111 TOX_TEST_WITH_MYSQL=yes TOX_TEST_WITH_POSTGRESQL=yes
      TOX_TEST_USE_CFFI=yes
  - python: 3.4
    env: TOX_ENV=py34-dj20 TOX_TEST_WITH_MYSQL=yes TOX_TEST_WITH_POSTGRESQL=yes
  - python: 3.5
    env: TOX_ENV=py35-dj20 TOX_TEST_WITH_MYSQL=yes TOX_TEST_WITH_POSTGRESQL=yes
  - python: 3.6
    env: TOX_ENV=py36-dj20 TOX_TEST_WITH_MYSQL=yes TOX_TEST_WITH_POSTGRESQL=yes
  - python: pypy3
    env: TOX_ENV=pypy3-dj20 TOX_TEST_WITH_MYSQL=yes TOX_TEST_WITH_POSTGRESQL=yes TOX_TEST_USE_CFFI=yes
  - python: 3.5
    env: TOX_ENV=py35-djmaster TOX_TEST_WITH_MYSQL=yes TOX_TEST_WITH_POSTGRESQL=yes
  - python: 3.6
    env: TOX_ENV=py36-djmaster TOX_TEST_WITH_MYSQL=yes TOX_TEST_WITH_POSTGRESQL=yes
  - python: 3.6
    env: TOX_ENV=flake8
  - python: 3.6
    env: TOX_ENV=isort
  - python: 3.6
    env: TOX_ENV=readme
  - python: 3.6
    env: TOX_ENV=check-manifest
services:
- postgresql
- mysql
install:
- pip install -U pip setuptools tox wheel
script:
- tox -e "${TOX_ENV}"
deploy:
  provider: pypi
  distributions: sdist bdist_wheel
  user: uncovertruth
  password:
    secure: PLEASE_REPLACE_ME
  on:
    tags: true
    repo: uncovertruth/django-lookup-extensions
    condition: "$TOX_ENV = py36-dj20"
notifications:
  email: false
  slack:
    secure: TIsvLLUrNvhB8tgq+eARcOBs3XOTdazI7r1rqr9PwC8YbGvKMSjk1ukhY8Vxfte6OrwTqyqDUG6lvwTqO4lpzEZgdd666XsLuWXS7uAAoRu0T62re60HIfvdmUy3zW2/E6djGCL22SxHmk6MUZqo7Z7FNW3biEOmyiVXY3jFym6iJdJSmWnGQCRDACoymyNlDrnTkNOHXwpZFPv7WIe2ZzGXbQcAxNpcvkgBwjBhW34EZXuRI8X09CH+EStz/GTW5ZGLrJ2vxm/zHwvJhIg6pmruGIMdLHE9HNqfRe+bG75afPzEjM3mXQNjYEvhwJR0rATGcsI2sdP0vSuyamtiVIY5a56TcIIS5G7+qXX6u5TGRw81LLCF+lBr5i6rizPQMkBkksTwFhwSQ4ouRebaSygGYh0W48pd7YX8PQYy6+WyoGk/0wUcTNnUL1vra4WsUGY+Weixjug31GbcveHuRXXgy/zAFqkQcv6SpiEFawhdVmEwWbX2sPaEtoI/pCMD7dcIVfB1EBEu1zDcyPj9geMjHszd3cSoWzk35kpfiMMeyASkJv0uLUQeHamghxQqP2XrxpJOa3IACK/dQwmAaIiS+yRESL+PI7uTgPMt/dtSyFwc5vNSSBgmPVxU8aIrksaAkx0DfYY3f3qRhW7VPTCnRoCGul9udA6DbUR4nLs=
